---
name: quick-fix
description: 記事の簡単な修正を素早く実行します。文字数不足、画像不足、メタディスクリプション未設定などの問題を自動修正。
argument-hint: <記事URL または 記事ID>
disable-model-invocation: true
---

# 記事クイックフィックス

指定された記事の一般的な問題を素早く修正します。

## 修正対象

以下の問題を自動検出・修正します：

### 1. メタディスクリプション未設定
- 記事の最初の150文字から自動生成
- 120-160文字に調整

### 2. アイキャッチ画像未設定
- 記事タイトルから関連画像を検索（Unsplash）
- 自動設定

### 3. 本文画像不足（3枚未満）
- h2見出しを検出
- 見出し内容から関連画像を検索（Unsplash）
- h2見出し直後に自動挿入

### 4. まとめセクション未設定
- h2見出しから要点を抽出
- 箇条書きでまとめセクションを自動生成

### 5. 内部リンク不足（2個未満）
- 類似記事を検索（Jaccard係数）
- 関連記事セクションを自動追加

## 実行方法

### ステップ1: 問題を検出

記事を分析して、以下をチェック：
```bash
python scripts/active/improve_post_structure.py --mode analyze --post-id $ARGUMENTS
```

### ステップ2: 修正を実行

検出された問題に応じて、適切なスクリプトを実行：

```bash
# DRY RUNで確認（推奨）
python scripts/active/apply_post_improvements.py --mode all --post-id $ARGUMENTS --dry-run

# 実際に修正を適用
python scripts/active/apply_post_improvements.py --mode all --post-id $ARGUMENTS
```

### ステップ3: 結果を確認

修正内容をレポート：
- 何が修正されたか
- 修正前後の比較
- 次のアクション

## 出力フォーマット

```markdown
# クイックフィックス結果

**記事**: [記事タイトル]
**URL**: [記事URL]
**修正日時**: [日時]

---

## 🔧 実行した修正

### ✅ メタディスクリプション
- **修正前**: なし
- **修正後**: [自動生成されたメタディスクリプション]（130文字）

### ✅ アイキャッチ画像
- **修正前**: なし
- **修正後**: 設定済み（Unsplashから取得）

### ✅ 本文画像
- **修正前**: 1枚
- **修正後**: 4枚（h2見出し後に3枚追加）

### ✅ まとめセクション
- **修正前**: なし
- **修正後**: 追加済み（要点4個の箇条書き）

### ✅ 内部リンク
- **修正前**: 0個
- **修正後**: 3個（関連記事セクション追加）

---

## 📊 修正前後の比較

| 項目 | 修正前 | 修正後 | 判定 |
|------|--------|--------|------|
| メタディスクリプション | ✗ | ✓ | 改善 |
| アイキャッチ画像 | ✗ | ✓ | 改善 |
| 本文画像数 | 1枚 | 4枚 | 改善 |
| まとめセクション | ✗ | ✓ | 改善 |
| 内部リンク数 | 0個 | 3個 | 改善 |

**AdSense要件適合率**: 60% → 100%

---

## ⚠️ 確認が必要な項目

以下は自動修正できなかったため、手動で確認してください：

1. **画像のaltテキスト**: 自動設定されましたが、内容を確認してください
2. **内部リンクの妥当性**: 提案された関連記事が適切か確認してください
3. **まとめの内容**: 自動生成されたまとめが正確か確認してください

---

## 🚀 次のアクション

1. **記事を確認**: [記事URL] にアクセスして表示を確認
2. **画像を確認**: 各画像が適切か確認
3. **リンクをテスト**: 内部リンクが正しく動作するか確認
4. **公開**: 問題なければそのまま公開、必要に応じて微調整

---

## 📝 ログ

実行したコマンド:
\`\`\`bash
python scripts/active/apply_post_improvements.py --mode all --post-id $ARGUMENTS
\`\`\`

実行時間: XX秒
```

## 利用可能なモード

`apply_post_improvements.py` の `--mode` オプション：

- `meta`: メタディスクリプションのみ
- `summary`: まとめセクションのみ
- `links`: 内部リンクのみ
- `images`: 本文画像のみ
- `all`: すべての修正を実行（推奨）

## 注意事項

- 必ず `--dry-run` で確認してから実行してください
- 自動修正は完璧ではありません。必ず人間の目で確認してください
- 元の記事内容を尊重し、大幅な変更は避けます
- 修正後は記事の表示を確認してください
