# [134] Serverless Frameworkでデプロイ失敗？IAMに必要な権限と解決策メモ【AWS】

**URL**: https://techsimpleapp.main.jp/2025/05/26/serverless-framework%e3%81%a7%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e5%a4%b1%e6%95%97%ef%bc%9fiam%e3%81%ab%e5%bf%85%e8%a6%81%e3%81%aa%e6%a8%a9%e9%99%90%e3%81%a8%e8%a7%a3%e6%b1%ba%e7%ad%96%e3%83%a1/
**カテゴリ**: 未分類
**タグ**: なし
**現在の文字数**: 985文字
**メタディスクリプション**: 

---

## 本文


## ✅ はじめに

Photo by Ilya Pavlov on Unsplash

AWSでServerless Frameworkを使ったデプロイ時に、CREATE_FAILED エラーが発生。原因は IAM ポリシーの不足でした。

この記事では、実際に遭遇したエラーと、その解決方法を備忘録としてまとめます。同じようなトラブルに遭遇した方の参考になれば幸いです。


## 🔍 発生したエラー内容

Photo by Conny Schneider on Unsplash

Serverless Frameworkのデプロイ時、以下のようなエラーが出ました。

```
リソース HttpApiStage は CREATE_FAILED 状態です  
User is not authorized to perform: apigateway:TagResource  

```

CloudFormationのスタック作成中に apigateway:TagResource 権限が不足していたことで失敗していたことがわかりました。


## 🛠 解決策：IAMポリシーに権限を追加

Photo by Nastuh Abootalebi on Unsplash

対応として、Lambdaの実行ロールまたはデプロイに使用しているIAMユーザー／ロールに、以下の権限を追加。

```
{
  "Effect": "Allow",
  "Action": "apigateway:TagResource",
  "Resource": "*"
}

```

その後、再度デプロイすると正常に完了しました。


## 💡 補足：DynamoDBでもValidationExceptionが発生

同日にもうひとつ、DynamoDBへのバッチ書き込みでも ValidationException が発生しました。

主な原因は、書き込み対象のItemの形式不備。スキーマに一致するようデータ整形して再実行し、解決しました。


## 📝 まとめ

- Serverless Frameworkのデプロイでは、API Gateway操作のためのIAM権限が必要
- apigateway:TagResource の権限漏れに注意
- DynamoDBでもデータ形式ミスにより ValidationException が起こることがある

日々の運用の中で気づいたことを、こうして蓄積していきたいですね。


---

# 改善指示

この記事を**Google AdSense審査突破**のために以下の観点で改善してください：

## 改善の目標

### 1. オリジナリティの強化
- 他サイトの情報を単純にまとめただけでなく、**独自の視点や分析**を追加してください
- 実例や具体的な数字を含めて説得力を高めてください
- 読者が「このサイトでしか読めない情報」と感じる要素を追加してください

### 2. 専門性の向上
- 技術的な正確性を保ちつつ、**より深い洞察**を追加してください
- 背景や原因、影響を詳しく説明してください
- 初心者でも理解できるように、専門用語には説明を加えてください

### 3. 読みやすさの改善
- 段落構成を見直し、**論理的な流れ**を作ってください
- 見出しを効果的に使って、記事の構造を明確にしてください
- 具体例や比喩を使って、理解しやすくしてください

### 4. 価値提供の明確化
- 読者が**実際に行動できる具体的な情報**を含めてください
- 「どうすればいいか」「何をすべきか」を明示してください
- 読み終わった後、読者が得られるメリットを明確にしてください

### 5. 文字数の目安
- **現在の文字数**: 985文字
- **目標文字数**: 1500文字以上（1,500文字以上が望ましい）
- 単に文字数を増やすのではなく、**有益な情報を追加**してください

## 改善の制約

- 元の記事の主題やテーマは変えないでください
- 技術的な内容の正確性を保ってください
- HTMLタグの構造は維持してください（h2, h3, p, ul, li など）
- 画像タグ（<img>）が含まれている場合は、そのまま残してください

## 出力形式

改善後の記事を**HTML形式**で出力してください。以下の構造を守ってください：

```html
<h2>見出し1</h2>
<p>段落1...</p>

<h2>見出し2</h2>
<p>段落2...</p>

<h3>小見出し</h3>
<p>段落3...</p>

<h2>まとめ</h2>
<ul>
<li>ポイント1</li>
<li>ポイント2</li>
<li>ポイント3</li>
</ul>
```

**重要**: 出力は改善後のHTML本文のみとし、説明文や前書きは含めないでください。

